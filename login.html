<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="auth-page">
  <div class="auth-container">
    <h1 class="auth-header">LOGIN</h1>
    <input id="username" type="text" placeholder="Username" class="auth-input">
    <input id="password" type="password" placeholder="Password" class="auth-input">
    
    <button id="loginBtn" class="auth-btn">SIGN IN</button>
    
    <p id="message" style="color: #ff4d4d; margin-top:15px; font-size:0.85rem; font-weight:bold;"></p>
    
    <div style="margin-top:20px; font-size:0.85rem; opacity:0.8;">
      Don't have an account? <a href="register.html" class="auth-link">Register</a>
    </div>
  </div>

  <script type="module">
    import { supabase } from './supabase.js';
    const handleLogin = async () => {
      const u = document.getElementById("username").value.trim();
      const p = document.getElementById("password").value;
      const { data } = await supabase.from('users').select('*').eq('username', u).eq('password', p).maybeSingle();
      if (data) {
        localStorage.setItem("username", u);
        location.href = 'dashboard.html';
      } else {
        document.getElementById("message").innerText = "Invalid credentials";
      }
    };
    document.getElementById("loginBtn").onclick = handleLogin;
    window.onkeypress = (e) => { if(e.key==='Enter') handleLogin(); };
  </script>
</body>
</html>
