<div class="form">
  <h1>Login</h1>
  <input id="user" type="text" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button id="loginBtn">Sign In</button>
  <p>Need an account? <a href="register.html" style="color:white">Register</a></p>
</div>
<script type="module">
  import { supabase } from './supabase.js';
  document.getElementById("loginBtn").onclick = async () => {
    const u = document.getElementById("user").value;
    const p = document.getElementById("pass").value;
    const { data } = await supabase.from('users').select('*').eq('username', u).eq('password', p).maybeSingle();
    
    if (data) {
      localStorage.setItem("username", u);
      location.href = 'index.html';
    } else {
      alert("Invalid login!");
    }
  };
</script>
